(this["webpackJsonpsafe-react"]=this["webpackJsonpsafe-react"]||[]).push([[70],{1598:function(e,t,n){"use strict";var a,r,c=n(25),i=n(23),o=n(26),s=n(1),u=i.default.div(a||(a=Object(c.a)(["\n  display: flex;\n  align-items: center;\n  margin: 8px 0;\n\n  svg {\n    margin: 0 12px 0 4px;\n  }\n"]))),d=Object(i.default)(o.Divider)(r||(r=Object(c.a)(["\n  width: 100%;\n"])));t.a=function(e){var t=e.withArrow;return Object(s.jsxs)(u,{children:[t&&Object(s.jsx)(o.Icon,{type:"arrowDown",size:"md"}),Object(s.jsx)(d,{})]})}},1875:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var a=n(39),r=n(1692),c=n.n(r),i=n(0),o=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2?arguments[2]:void 0,r=Object(i.useRef)(e),o=Object(i.useState)(e),s=Object(a.a)(o,2),u=s[0],d=s[1],l=Object(i.useMemo)((function(){return c()((function(e){return d(e)}),t,n)}),[d,t,n]);return Object(i.useEffect)((function(){if(e!==r.current)return l(e),r.current=e,l.cancel}),[l,e,r]),u}},2977:function(e,t,n){"use strict";n.r(t);var a,r,c,i,o,s,u,d,l,j,b,p,f,O,x,h,m,g,v=n(57),w=n(788),y=n(8),S=n(2),C=n.n(S),A=n(15),T=n(39),k=n(25),E=n(0),I=n(23),R=n(26),M=n(2094),z=n(32),D=n(2099),L=n(440),U=n.n(L),N=n(81),B=n(19),P=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:["https:","http:"];try{var n=new URL(e);return t.includes(n.protocol)}catch(a){return!1}},_=n(155),F=n(363),q=n(24),G=n(349),H=n(573),V=n(1),W=I.default.div(a||(a=Object(k.a)(["\n  padding: ",";\n"])),(function(e){var t=e.theme;return"".concat(t.margin.sm," ").concat(t.margin.lg)})),K=I.default.div(r||(r=Object(k.a)(["\n  display: flex;\n  align-items: center;\n\n  span {\n    margin-right: 4px;\n  }\n"]))),J=I.default.div(c||(c=Object(k.a)(["\n  margin-top: 15px;\n"]))),X=function(e){var t=e.onTxReject,n=e.onClose,a=e.requestId;return Object(V.jsxs)(W,{children:[Object(V.jsxs)(K,{children:[Object(V.jsx)(R.Icon,{color:"error",size:"md",type:"info"}),Object(V.jsx)(R.Title,{size:"xs",children:"Transaction error"})]}),Object(V.jsx)(R.Text,{size:"lg",children:"This Safe App initiated a transaction which cannot be processed. Please get in touch with the developer of this Safe App for more information."}),Object(V.jsx)(J,{children:Object(V.jsx)(R.ModalFooterConfirmation,{cancelText:"Cancel",handleCancel:function(){return t(a),void n()},handleOk:function(){},okDisabled:!0,okText:"Submit"})})]})},Y=n(36),Z=n(84),$=n(575),Q=n(103),ee=n(65),te=n(610),ne=n(574),ae=n(10),re=n(280),ce=n.n(re),ie=n(164),oe=n(1625),se=I.default.div(i||(i=Object(k.a)(["\n  display: flex;\n  align-items: center;\n\n  > :nth-child(2) {\n    margin-left: ","px;\n  }\n"])),(function(e){return e.margin})),ue=I.default.div(o||(o=Object(k.a)(["\n  margin-bottom: 15px;\n\n  > :nth-child(2) {\n    margin-bottom: 15px;\n  }\n"]))),de=I.default.div(s||(s=Object(k.a)(["\n  width: 100%;\n  max-height: 260px;\n  overflow-y: auto;\n  border-top: 2px solid ",";\n"])),(function(e){return e.theme.colors.separator})),le=I.default.div(u||(u=Object(k.a)(["\n  display: flex;\n  justify-content: space-between;\n\n  padding: 0 24px;\n  height: 50px;\n  border-bottom: 2px solid ",";\n\n  :hover {\n    cursor: pointer;\n  }\n"])),(function(e){return e.theme.colors.separator})),je=I.default.div(d||(d=Object(k.a)(["\n  margin-bottom: 15px;\n"]))),be=function(e){try{return Array.isArray(e)||(e=e.split(",")),e.reduce((function(e,t){return e+Object(Z.hexToBytes)(t).length}),0)}catch(t){return 0}},pe=function(e){var t=e.txRecipient,n=e.txData,a=e.txValue,r=e.recipientName;return Object(V.jsxs)(ue,{children:[Object(V.jsxs)(V.Fragment,{children:[Object(V.jsx)(R.Text,{size:"lg",strong:!0,children:Object(oe.d)(a)}),Object(V.jsx)(ie.a,{hash:t,showAvatar:!0,textSize:"lg",showCopyBtn:!0,name:r,explorerUrl:Object(B.i)(t)})]}),Object(V.jsxs)(V.Fragment,{children:[Object(V.jsx)(R.Text,{size:"lg",strong:!0,children:"Data (hex encoded):"}),Object(V.jsxs)(se,{margin:5,children:[Object(V.jsxs)(R.Text,{size:"lg",children:[n?be(n):0," bytes"]}),Object(V.jsx)(R.CopyToClipboardBtn,{textToCopy:n})]})]})]})},fe=function(e,t){var n;if("address"===e.type&&(n=Object(V.jsx)(ie.a,{hash:e.value,showAvatar:!0,textSize:"lg",showCopyBtn:!0,explorerUrl:Object(B.i)(e.value)})),e.type.startsWith("bytes")&&(n=Object(V.jsxs)(se,{margin:5,children:[Object(V.jsxs)(R.Text,{size:"lg",children:[be(e.value)," bytes"]}),Object(V.jsx)(R.CopyToClipboardBtn,{textToCopy:e.value})]})),!n){var a=e.value;if(e.type.endsWith("[]"))try{a=JSON.stringify(e.value)}catch(r){}n=Object(V.jsx)(R.Text,{size:"lg",children:a})}return Object(V.jsxs)(je,{children:[Object(V.jsxs)(R.Text,{size:"lg",strong:!0,children:[e.name," (",e.type,")"]}),n]},t)},Oe=function(e){var t=e.decodedData,n=e.onTxItemClick;return t?Object(V.jsx)(de,{children:Object(V.jsxs)(le,{onClick:function(){return n(t)},children:[Object(V.jsx)(R.IconText,{iconSize:"sm",iconType:"code",text:"Contract interaction",textSize:"xl"}),Object(V.jsxs)(se,{margin:20,children:[Object(V.jsx)(R.Text,{size:"xl",children:t.method}),Object(V.jsx)(R.FixedIcon,{type:"chevronRight"})]})]})}):null},xe=function(e){var t=e.decodedData,n=e.onTxItemClick,a=ce()(t,"parameters[0].valueDecoded");return a?Object(V.jsx)(de,{children:a.map((function(e,t){return Object(V.jsxs)(le,{onClick:function(){return n(e)},children:[Object(V.jsx)(R.IconText,{iconSize:"sm",iconType:"code",text:"Contract interaction",textSize:"xl"}),Object(V.jsxs)(se,{margin:20,children:[e.dataDecoded&&Object(V.jsx)(R.Text,{size:"xl",children:e.dataDecoded.method}),Object(V.jsx)(R.FixedIcon,{type:"chevronRight"})]})]},t)}))}):null},he=function(e){var t=e.txs,n=e.decodedData,a=e.onTxItemClick;return t.length>1?Object(V.jsx)(xe,{decodedData:n,onTxItemClick:a}):Object(V.jsx)(Oe,{decodedData:n,onTxItemClick:a})},me=function(){var e=Object(A.a)(C.a.mark((function e(t){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((null===t||void 0===t?void 0:t.length)&&"0x"!==t){e.next=2;break}return e.abrupt("return",null);case 2:return e.prev=2,e.next=5,Object(Y.getDecodedData)(q.e,Object(B.b)(),t);case 5:return e.abrupt("return",e.sent);case 8:return e.prev=8,e.t0=e.catch(2),e.abrupt("return",null);case 11:case"end":return e.stop()}}),e,null,[[2,8]])})));return function(t){return e.apply(this,arguments)}}(),ge=n(304),ve=n(153),we=n(178),ye=n(1598),Se=n(248),Ce=n(1596),Ae=I.default.div(l||(l=Object(k.a)(["\n  max-width: 480px;\n  padding: "," "," 0;\n"])),ae.md,ae.lg),Te=I.default.div(j||(j=Object(k.a)(["\n  margin: 24px -24px;\n"]))),ke=Object(I.default)(ve.a)(b||(b=Object(k.a)(["\n  background-color: ",";\n  width: fit-content;\n  padding: 5px 10px;\n  border-radius: 3px;\n  margin: 4px 0 0 40px;\n\n  display: flex;\n\n  > :nth-child(1) {\n    margin-right: 5px;\n  }\n"])),(function(e){return e.theme.colors.separator})),Ee=function(e){var t=e.app,n=e.txs,a=e.safeAddress,r=e.ethBalance,c=e.safeName,i=e.hidden,o=e.onUserConfirm,s=e.onClose,u=e.onReject,d=e.requestId,l=e.showDecodedTxData,j=n.length>1,b=Object(E.useState)(null),p=Object(T.a)(b,2),f=p[0],O=p[1],x=Object(z.d)(),h=Object(B.n)(),m=Object(B.i)(a),g=Object(z.e)(Se.b),v=Object(E.useMemo)((function(){var e;return j?Object(Q.g)():null===(e=n[0])||void 0===e?void 0:e.to}),[n,j]),w=Object(E.useMemo)((function(){var e;return j?Object(te.a)(n):null===(e=n[0])||void 0===e?void 0:e.data}),[n,j]),y=Object(E.useMemo)((function(){var e,t;return j?"0":(t=null===(e=n[0])||void 0===e?void 0:e.value,Object(Z.toBN)(t).toString())}),[n,j]),S=Object(E.useMemo)((function(){return j?Y.Operation.DELEGATE:Y.Operation.CALL}),[j]);Object(E.useEffect)((function(){var e=function(){var e=Object(A.a)(C.a.mark((function e(){var t;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,me(w);case 2:t=e.sent,O(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[w]);var k=function(e){o(e,d),s()};return Object(V.jsx)(Ce.a,{txTo:v,txData:w,txValue:y,operation:S,onSubmit:function(e,n){x(Object($.c)({safeAddress:a,to:v,valueInWei:y,txData:w,operation:S,origin:t.id,navigateToTransactionsTab:!1,txNonce:e.safeNonce,safeTxGas:e.safeTxGas,ethParameters:e,notifiedTransaction:ee.a.STANDARD_TX,delayExecution:n},k,u))},isSubmitDisabled:!g,onBack:u,children:Object(V.jsxs)("div",{hidden:i,children:[Object(V.jsx)(ne.a,{title:t.name,iconUrl:t.iconUrl,onClose:u}),Object(V.jsx)(we.a,{}),Object(V.jsxs)(Ae,{children:[Object(V.jsx)(ie.a,{name:c,hash:a,showAvatar:!0,showCopyBtn:!0,explorerUrl:m}),Object(V.jsxs)(ke,{children:[Object(V.jsx)(R.Text,{size:"md",children:"Balance:"}),Object(V.jsx)(R.Text,{size:"md",strong:!0,children:"".concat(r," ").concat(h.symbol)})]}),Object(V.jsx)(ye.a,{withArrow:!0}),Object(V.jsx)(pe,{txRecipient:v,txData:w,txValue:Object(ge.a)(y,h.decimals)}),Object(V.jsx)(Te,{children:Object(V.jsx)(he,{txs:n,decodedData:f,onTxItemClick:l})}),!j&&Object(V.jsx)(ye.a,{})]})]})})},Ie=n(436),Re=n(352),Me=n.n(Re),ze=n(78),De=n(111),Le=Object(I.default)(ze.a)(p||(p=Object(k.a)(["\n  && {\n    font-size: ",";\n    white-space: nowrap;\n    max-width: 370px;\n    overflow: hidden;\n  }\n"])),ae.lg),Ue=I.default.img(f||(f=Object(k.a)(["\n  width: 20px;\n  margin-right: 10px;\n"]))),Ne=I.default.div(O||(O=Object(k.a)(["\n  display: flex;\n  align-items: center;\n"]))),Be=Object(I.default)(De.a)(x||(x=Object(k.a)(["\n  padding: "," ",";\n  justify-content: space-between;\n  box-sizing: border-box;\n  max-height: 75px;\n"])),ae.md,ae.lg),Pe=Object(I.default)(Me.a)(h||(h=Object(k.a)(["\n  height: 35px;\n  width: 35px;\n"]))),_e=I.default.div(m||(m=Object(k.a)(["\n  margin-right: 15px;\n"]))),Fe=function(e){var t=e.goBack,n=e.iconUrl,a=e.title,r=e.onClose;return Object(V.jsxs)(Be,{align:"center",grow:!0,children:[Object(V.jsxs)(Ne,{children:[t&&Object(V.jsx)(_e,{children:Object(V.jsx)(Ie.a,{onClick:t,children:Object(V.jsx)(R.Icon,{type:"arrowLeft",size:"md"})})}),n&&Object(V.jsx)(Ue,{alt:a,src:n}),Object(V.jsx)(Le,{noMargin:!0,weight:"bolder",title:a,children:a})]}),Object(V.jsx)(Ie.a,{disableRipple:!0,onClick:r,children:Object(V.jsx)(Pe,{})})]})},qe=I.default.div(g||(g=Object(k.a)(["\n  max-width: 480px;\n  padding: "," ",";\n  word-break: break-word;\n"])),ae.md,ae.lg);var Ge,He,Ve,We,Ke,Je,Xe,Ye,Ze,$e,Qe,et,tt,nt,at,rt,ct,it,ot,st,ut,dt,lt,jt,bt,pt,ft,Ot,xt,ht,mt,gt,vt,wt,yt,St,Ct,At,Tt=function(e){var t,n,a=e.hideDecodedTxData,r=e.onClose,c=e.decodedTxData,i=Object(B.n)();if(void 0!==c.operation){var o,s=Object(ge.a)(c.value,i.decimals);n=Object(V.jsxs)(V.Fragment,{children:[Object(V.jsx)(pe,{txRecipient:c.to,txData:c.data,txValue:s}),null===(o=c.dataDecoded)||void 0===o?void 0:o.parameters.map((function(e,t){return fe(e,t)}))]})}else n=Object(V.jsx)(V.Fragment,{children:c.parameters.map((function(e,t){return fe(e,t)}))});return Object(V.jsxs)(V.Fragment,{children:[Object(V.jsx)(Fe,{title:(null===(t=c.dataDecoded)||void 0===t?void 0:t.method)||c.method,onClose:r,goBack:a}),Object(V.jsx)(we.a,{}),Object(V.jsx)(qe,{children:n})]})},kt=function(e){var t=Object(E.useState)(),n=Object(T.a)(t,2),a=n[0],r=n[1],c=!e.txs.length||e.txs.some((function(e){return!function(e){return!!["string","number"].includes(typeof e.value)&&!("string"===typeof e.value&&!/^(0x)?[0-9a-f]+$/i.test(e.value))&&void 0===Object(H.k)(e.to)&&!!e.data&&"string"===typeof e.data}(e)})),i=r,o=function(){return r(void 0)},s=function(){e.onClose(),e.onTxReject(e.requestId)};return c?Object(V.jsx)(G.c,{description:"Safe App transaction",title:"Safe App transaction",open:e.isOpen,children:Object(V.jsx)(X,Object(y.a)({},e))}):Object(V.jsxs)(G.c,{description:"Safe App transaction",title:"Safe App transaction",open:e.isOpen,children:[a&&Object(V.jsx)(Tt,{onClose:function(){o(),s()},hideDecodedTxData:o,decodedTxData:a}),Object(V.jsx)(Ee,Object(y.a)(Object(y.a)({},e),{},{onReject:s,showDecodedTxData:i,hidden:!!a}))]})},Et=n(411),It=n(586),Rt=n(7),Mt=n(22),zt=function e(t,n){var a=this;Object(Rt.a)(this,e),this.iframeRef=void 0,this.handlers=new Map,this.app=void 0,this.on=function(e,t){a.handlers.set(e,t)},this.isValidMessage=function(e){var t=e.source.parent===window.parent,n=Object.values(M.Methods).includes(e.data.method);return t&&n},this.canHandleMessage=function(e){return Boolean(a.handlers.get(e.data.method))},this.send=function(e,t){var n,r,c=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=Object(M.getSDKVersion)(),o=c?M.MessageFormatter.makeErrorResponse(t,e,i):M.MessageFormatter.makeResponse(t,e,i);null===(n=a.iframeRef.current)||void 0===n||null===(r=n.contentWindow)||void 0===r||r.postMessage(o,"*")},this.handleIncomingMessage=function(){var e=Object(A.a)(C.a.mark((function e(t){var n,r,c,i;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=a.isValidMessage(t),r=a.canHandleMessage(t),!n||!r){e.next=15;break}return c=a.handlers.get(t.data.method),e.prev=4,e.next=7,c(t);case 7:"undefined"!==typeof(i=e.sent)&&a.send(i,t.data.id),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(4),a.send(e.t0.message,t.data.id,!0),Object(Mt.d)(Mt.b._901,e.t0.message,{contexts:{safeApp:a.app,request:t.data}});case 15:case"end":return e.stop()}}),e,null,[[4,11]])})));return function(t){return e.apply(this,arguments)}}(),this.clear=function(){window.removeEventListener("message",a.handleIncomingMessage)},this.iframeRef=t,this.app=n,window.addEventListener("message",this.handleIncomingMessage)},Dt=n(789),Lt=n(612),Ut=n(350),Nt={isOpen:!1,message:"",requestId:""},Bt=n(60),Pt=n(31),_t=n(46),Ft=n(629),qt=I.default.div(Ge||(Ge=Object(k.a)(["\n  max-width: 480px;\n  padding: "," "," 0;\n"])),ae.md,ae.lg),Gt=Object(I.default)(ve.a)(He||(He=Object(k.a)(["\n  background-color: ",";\n  width: fit-content;\n  padding: 5px 10px;\n  border-radius: 3px;\n  margin: 4px 0 0 40px;\n\n  display: flex;\n\n  > :nth-child(1) {\n    margin-right: 5px;\n  }\n"])),(function(e){return e.theme.colors.separator})),Ht=Object(I.default)(Ft.a)(Ve||(Ve=Object(k.a)(["\n  &.MuiFormControl-root {\n    padding-bottom: ",";\n  }\n"])),(function(e){return e.theme.margin.md})),Vt=Object(I.default)(ze.a)(We||(We=Object(k.a)(["\n  display: flex;\n  align-items: center;\n\n  > span:first-child {\n    margin-right: ",";\n  }\n"])),(function(e){return e.theme.margin.xs})),Wt=function(e){var t=e.app,n=e.safeAddress,a=e.ethBalance,r=e.safeName,c=e.onUserConfirm,i=e.onClose,o=e.onTxReject,s=e.requestId,u=e.utf8Message,d=e.txData,l=e.txRecipient,j=Object(z.d)(),b=Object(B.i)(n),p=Object(B.n)(),f=Object(z.e)(Se.b),O=function(){o(s),i()},x=function(e){c(e,s),i()};return Object(V.jsxs)(Ce.a,{txData:d,txTo:l,onSubmit:function(e,a){j(Object($.c)({safeAddress:n,to:l,valueInWei:"0",txData:d,operation:Y.Operation.DELEGATE,origin:t.id,navigateToTransactionsTab:!1,txNonce:e.safeNonce,safeTxGas:e.safeTxGas,ethParameters:e,notifiedTransaction:ee.a.STANDARD_TX,delayExecution:a},x,O))},onClose:O,operation:Y.Operation.DELEGATE,isSubmitDisabled:!f,children:[Object(V.jsx)(Fe,{title:t.name,iconUrl:t.iconUrl,onClose:O}),Object(V.jsx)(we.a,{}),Object(V.jsxs)(qt,{children:[Object(V.jsx)(ie.a,{name:r,hash:n,showAvatar:!0,showCopyBtn:!0,explorerUrl:b}),Object(V.jsxs)(Gt,{children:[Object(V.jsx)(R.Text,{size:"md",children:"Balance:"}),Object(V.jsx)(R.Text,{size:"md",strong:!0,children:"".concat(a," ").concat(p.symbol)})]}),Object(V.jsx)(ye.a,{withArrow:!0}),Object(V.jsx)(pe,{txRecipient:l,txData:d,txValue:"0",recipientName:"SignMessageLib"}),Object(V.jsx)(R.Text,{size:"lg",strong:!0,children:"Signing message:"}),Object(V.jsx)(Ht,{rows:"2",multiline:!0,disabled:!0,fullWidth:!0,label:"Message to sign",inputProps:{type:"text",value:u,name:"Message to sign",onChange:function(){},placeholder:""},InputProps:{disableUnderline:!0}}),Object(V.jsxs)(Vt,{children:[Object(V.jsx)(R.Icon,{size:"md",type:"info",color:"warning"}),"Signing a message with the Gnosis Safe requires a transaction on the blockchain"]})]})]})},Kt=n(56),Jt=["message","isOpen"],Xt=function(e){var t=e.message,n=e.isOpen,a=Object(Bt.a)(e,Jt),r=Object(Pt.j)(),c=Object(z.e)(Kt.a),i=Object(Q.k)(c)||_t.a,o=Object(Q.l)(r,c).methods.signMessage(r.eth.accounts.hashMessage(t)).encodeABI(),s=function(e){var t=Object(Z.isHexStrict)(e.toString()),n=e;if(t)try{n=Object(Z.hexToUtf8)(e)}catch(a){}return n}(t);return Object(V.jsx)(G.c,{description:"Safe App transaction",title:"Safe App transaction",open:n,children:Object(V.jsx)(Wt,Object(y.a)(Object(y.a)({},a),{},{txRecipient:i,txData:o,utf8Message:s}))})},Yt=I.default.div(Ke||(Ke=Object(k.a)(["\n  display: flex;\n  flex-direction: column;\n  height: 100%;\n  margin: 0 -16px;\n"]))),Zt=Object(I.default)(R.Card)(Je||(Je=Object(k.a)(["\n  flex-grow: 1;\n  padding: 0;\n  border-radius: 0;\n"]))),$t=I.default.iframe(Xe||(Xe=Object(k.a)(["\n  height: 100%;\n  width: 100%;\n  overflow: auto;\n  box-sizing: border-box;\n  display: ",";\n"])),(function(e){return e.isLoading?"none":"block"})),Qt={isOpen:!1,txs:[],requestId:"",params:void 0},en=new U.a.providers.HttpProvider(Object(B.q)(),{timeout:1e4}),tn=function(e){var t=e.appUrl,n=Object(z.e)(N.a),a=n.address,r=n.ethBalance,c=n.owners,i=n.threshold,o=Object(B.e)(),s=o.nativeCurrency,u=o.chainId,d=o.chainName,l=o.shortName,j=Object(z.e)((function(e){return Object(Ut.a)(e,{address:a})})),b=Object(_.i)().trackEvent,p=Object(E.useRef)(null),f=Object(E.useState)(Qt),O=Object(T.a)(f,2),x=O[0],h=O[1],m=Object(E.useState)(!0),g=Object(T.a)(m,2),v=g[0],w=g[1],S=Object(E.useState)((function(){return Object(It.e)(t)})),k=Object(T.a)(S,2),I=k[0],L=k[1],U=function(){var e=Object(E.useState)(Nt),t=Object(T.a)(e,2),n=t[0],a=t[1];return[n,Object(E.useCallback)((function(e,t){a(Object(y.a)(Object(y.a)({},Nt),{},{isOpen:!0,message:e,requestId:t}))}),[]),Object(E.useCallback)((function(){a(Nt)}),[])]}(),P=Object(T.a)(U,3),G=P[0],H=P[1],W=P[2],K=Object(E.useRef)(),J=Object(E.useState)(!1),X=Object(T.a)(J,2),Y=X[0],Z=X[1],$=Object(E.useRef)(),Q=Object(E.useState)(!1),ee=Object(T.a)(Q,2)[1];Object(E.useEffect)((function(){var e=function(){clearTimeout(K.current),clearTimeout($.current)};return v?(K.current=window.setTimeout((function(){Z(!0)}),q.q),$.current=window.setTimeout((function(){ee((function(){throw Error("There was an error loading the Safe App. There might be a problem with the App provider.")}))}),3e4)):(e(),Z(!1)),function(){e()}}),[v]);var te=Object(E.useCallback)((function(e,t,n){return h({isOpen:!0,txs:e,requestId:n,params:t})}),[h]),ne=Object(E.useCallback)((function(){return h(Qt)}),[h]),ae=function(e,t,n,a){var r=Object(Et.useSnackbar)(),c=r.enqueueSnackbar,i=r.closeSnackbar,o=Object(z.e)(N.j),s=o.address,u=o.ethBalance,d=o.name,l=Object(z.d)(),j=Object(B.e)(),b=j.chainId,p=j.chainName,f=Object(E.useCallback)((function(t,n){var r,c,i=Object(y.a)(Object(y.a)({},t),{},{requestId:n||Math.trunc(window.performance.now()),version:"0.4.2"});a&&e&&(null===(r=a.current)||void 0===r||null===(c=r.contentWindow)||void 0===c||c.postMessage(i,e.url))}),[a,e]);return Object(E.useEffect)((function(){var n=function(e,n,a){if(e)switch(e){case D.SDK_MESSAGES.SEND_TRANSACTIONS:n&&t(n,void 0,a);break;case D.SDK_MESSAGES.SAFE_APP_SDK_INITIALIZED:var r={messageId:D.INTERFACE_MESSAGES.ON_SAFE_INFO,data:{safeAddress:s,network:Object(It.g)(p,b).toLowerCase(),ethBalance:u}},c={messageId:D.INTERFACE_MESSAGES.ENV_INFO,data:{txServiceUrl:Object(B.s)()}};f(r),f(c);break;default:console.error("ThirdPartyApp: A message was received with an unknown message id ".concat(e,"."))}},a=function(){var t=Object(A.a)(C.a.mark((function t(a){return C.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a.origin!==window.origin){t.next=2;break}return t.abrupt("return");case 2:if(null===e||void 0===e?void 0:e.url.includes(a.origin)){t.next=5;break}return console.error("ThirdPartyApp: A message was received from an unknown origin ".concat(a.origin)),t.abrupt("return");case 5:n(a.data.messageId,a.data.data,a.data.requestId);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return window.addEventListener("message",a),function(){window.removeEventListener("message",a)}}),[p,b,n,i,l,c,u,t,s,d,e,f]),{sendMessageToIframe:f}}(I,te,ne,p),re=ae.sendMessageToIframe,ce=Object(E.useCallback)((function(){var e=p.current;e&&function(e,t){try{var n=new URL(e),a=new URL(t);return n.href===a.href}catch(r){return!1}}(e.src,t)&&(w(!1),re({messageId:D.INTERFACE_MESSAGES.ON_SAFE_INFO,data:{safeAddress:a,network:Object(It.g)(d,u).toLowerCase(),ethBalance:r}}))}),[d,u,r,a,t,re]),ie=function(e,t){var n=Object(E.useState)(void 0),a=Object(T.a)(n,2),r=a[0],c=a[1];return Object(E.useEffect)((function(){var n;return t&&function(e,t){n=new zt(e,t),c(n)}(e,t),function(){var e;null===(e=n)||void 0===e||e.clear()}}),[t,e]),r}(p,I);Object(E.useEffect)((function(){null===ie||void 0===ie||ie.on("getEnvInfo",(function(){return{txServiceUrl:Object(B.s)()}})),null===ie||void 0===ie||ie.on(M.Methods.getTxBySafeTxHash,function(){var e=Object(A.a)(C.a.mark((function e(t){var n,a,r;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.data.params,a=n.safeTxHash,e.next=3,Object(Lt.a)(a);case 3:return r=e.sent,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),null===ie||void 0===ie||ie.on(M.Methods.getSafeInfo,(function(){return{safeAddress:a,network:Object(It.g)(d,u).toUpperCase(),chainId:parseInt(u,10),owners:c,threshold:i}})),null===ie||void 0===ie||ie.on(M.Methods.getSafeBalances,function(){var e=Object(A.a)(C.a.mark((function e(t){var n,r,c,i;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.data.params,r=n.currency,c=void 0===r?"usd":r,e.next=3,Object(Dt.a)({safeAddress:a,selectedCurrency:c});case 3:return i=e.sent,e.abrupt("return",i);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),null===ie||void 0===ie||ie.on(M.Methods.rpcCall,function(){var e=Object(A.a)(C.a.mark((function e(t){var n,a;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.data.params,e.prev=1,a=new Promise((function(e,t){en.send({jsonrpc:"2.0",method:n.call,params:n.params,id:"1"},(function(n,a){(n||(null===a||void 0===a?void 0:a.error))&&t(n||(null===a||void 0===a?void 0:a.error)),e(null===a||void 0===a?void 0:a.result)}))})),e.abrupt("return",a);case 6:return e.prev=6,e.t0=e.catch(1),e.abrupt("return",e.t0);case 9:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t){return e.apply(this,arguments)}}()),null===ie||void 0===ie||ie.on(M.Methods.sendTransactions,(function(e){te(e.data.params.txs,e.data.params.params,e.data.id)})),null===ie||void 0===ie||ie.on(M.Methods.signMessage,function(){var e=Object(A.a)(C.a.mark((function e(t){var n,a;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.data.params,a=n.message,H(a,t.data.id);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),null===ie||void 0===ie||ie.on(M.Methods.getChainInfo,Object(A.a)(C.a.mark((function e(){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{chainName:d,chainId:u,shortName:l,nativeCurrency:s});case 1:case"end":return e.stop()}}),e)}))))}),[ie,te,a,c,i,H,s,u,d,l]);var oe=function(e,t){re({messageId:D.INTERFACE_MESSAGES.TRANSACTION_CONFIRMED,data:{safeTxHash:e}},x.requestId),null===ie||void 0===ie||ie.send({safeTxHash:e},t)},se=function(e){re({messageId:D.INTERFACE_MESSAGES.TRANSACTION_REJECTED,data:{}},x.requestId),null===ie||void 0===ie||ie.send("Transaction was rejected",e,!0)};return Object(E.useEffect)((function(){if(!t)throw Error("App url No provided or it is invalid.");var e=function(){var e=Object(A.a)(C.a.mark((function e(){var n;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(It.d)(t);case 3:n=e.sent,L(n),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),Object(Mt.c)(Mt.b._900,"".concat(t,", ").concat(e.t0.message));case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();e()}),[t]),Object(E.useEffect)((function(){I&&b(Object(y.a)(Object(y.a)({},_.b.SAFE_APP),{},{label:I.name}))}),[I,b]),Object(V.jsxs)(Yt,{children:[Object(V.jsxs)(Zt,{children:[v&&Object(V.jsxs)(F.a,{style:{flexDirection:"column"},children:[Y&&Object(V.jsx)(R.Title,{size:"xs",children:"The Safe App is taking too long to load, consider refreshing."}),Object(V.jsx)(R.Loader,{size:"md"})]}),Object(V.jsx)($t,{isLoading:v,frameBorder:"0",id:"iframe-".concat(t),ref:p,src:t,title:I.name,onLoad:ce,allow:"camera"})]}),Object(V.jsx)(kt,{isOpen:x.isOpen,app:I,safeAddress:a,ethBalance:r,safeName:j,txs:x.txs,onClose:ne,requestId:x.requestId,onUserConfirm:oe,params:x.params,onTxReject:se}),Object(V.jsx)(Xt,{isOpen:G.isOpen,app:I,safeAddress:a,ethBalance:r,safeName:j,onClose:W,requestId:G.requestId,message:G.message,onUserConfirm:oe,onTxReject:se})]})},nn=n(2975),an=n(2989),rn=n(786),cn=n(113),on=n(94),sn=n(2935),un=n.n(sn),dn=n(2102),ln=n.n(dn),jn=n(321),bn=n.p+"static/media/addApp.8e52bdd5.svg",pn=n(362),fn=n(777),On=Object(I.keyframes)(Ye||(Ye=Object(k.a)(["\n  0% {\n    background-position: 0% 54%;\n  }\n  50% {\n    background-position: 100% 47%;\n  }\n  100% {\n    background-position: 0% 54%;\n  }\n"]))),xn=I.default.div(Ze||(Ze=Object(k.a)(["\n  height: 60px;\n  width: 60px;\n  border-radius: 30px;\n  margin: 0 auto;\n  background-color: lightgrey;\n  background: linear-gradient(84deg, lightgrey, transparent);\n  background-size: 400% 400%;\n  animation: "," 1.5s ease infinite;\n"])),On),hn=I.default.div($e||($e=Object(k.a)(["\n  height: 24px;\n  width: 160px;\n  margin: 24px auto;\n  background-color: lightgrey;\n  background: linear-gradient(84deg, lightgrey, transparent);\n  background-size: 400% 400%;\n  animation: "," 1.5s ease infinite;\n"])),On),mn=I.default.div(Qe||(Qe=Object(k.a)(["\n  height: 16px;\n  width: 200px;\n  background-color: lightgrey;\n  background: linear-gradient(84deg, lightgrey, transparent);\n  background-size: 400% 400%;\n  animation: "," 1.5s ease infinite;\n"])),On),gn=Object(I.default)(R.Card)(et||(et=Object(k.a)(["\n  display: flex;\n  align-items: center;\n  flex-direction: column;\n  justify-content: space-evenly;\n  box-shadow: 1px 2px 10px 0 ",";\n  height: 232px !important;\n  box-sizing: border-box;\n  cursor: pointer;\n  color: ",";\n\n  :hover {\n    box-shadow: 1px 2px 16px 0 ",";\n    transition: box-shadow 0.3s ease-in-out;\n    background-color: ",";\n    cursor: pointer;\n\n    h5 {\n      color: ",";\n    }\n  }\n"])),(function(e){var t=e.theme;return Object(jn.alpha)(t.colors.shadow.color,.18)}),(function(e){return e.theme.colors.secondary}),(function(e){var t=e.theme;return Object(jn.alpha)(t.colors.shadow.color,.35)}),(function(e){return e.theme.colors.background}),(function(e){return e.theme.colors.primary})),vn=Object(I.default)(Ie.a)(tt||(tt=Object(k.a)(["\n  &.MuiButtonBase-root {\n    position: absolute;\n    top: 10px;\n    right: 10px;\n    z-index: 10;\n    padding: 5px;\n    opacity: 0;\n\n    transition: opacity 0.2s ease-in-out;\n  }\n\n  svg {\n    width: 16px;\n    height: 16px;\n  }\n"]))),wn=Object(I.default)(nn.a.div)(nt||(nt=Object(k.a)(["\n  position: relative;\n\n  &:hover {\n    "," {\n      opacity: 1;\n    }\n  }\n"])),vn),yn=I.default.img(at||(at=Object(k.a)(["\n  width: ",";\n  height: ",";\n  margin-top: ",";\n  object-fit: contain;\n"])),(function(e){return"md"===e.size?"60px":"102px"}),(function(e){return"md"===e.size?"60px":"92px"}),(function(e){return"md"===e.size?"0":"-16px"})),Sn=Object(I.default)(R.Title)(rt||(rt=Object(k.a)(["\n  text-align: center;\n  margin: 16px 0 9px 0;\n"]))),Cn=Object(I.default)(R.Text)(ct||(ct=Object(k.a)(["\n  text-align: center;\n  height: 72px;\n  line-height: 24px;\n  overflow: hidden;\n  display: -webkit-box;\n  -webkit-line-clamp: 3;\n  -webkit-box-orient: vertical;\n"]))),An=Object(I.default)(on.a)(it||(it=Object(k.a)(["\n  text-decoration: none;\n"]))),Tn=function(e){e.currentTarget.onerror=null,e.currentTarget.src=fn.a},kn=function(e,t){return t?"Unpin ".concat(e):"Pin ".concat(e)},En=function(e){var t=e.app,n=e.iconSize,a=void 0===n?"md":n,r=e.to,c=e.onPin,i=e.onRemove,o=e.pinned,s=void 0!==o&&o;if(function(e){return pn.a.LOADING===e.fetchStatus}(t))return Object(V.jsx)(wn,{layout:!0,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:Object(V.jsxs)(gn,{children:[Object(V.jsx)(xn,{}),Object(V.jsx)(hn,{}),Object(V.jsx)(mn,{}),Object(V.jsx)(mn,{})]})});var u=Object(V.jsxs)(V.Fragment,{children:[Object(V.jsxs)(gn,{children:[Object(V.jsx)(yn,{alt:"".concat(t.name||"App"," Logo"),src:t.iconUrl,onError:Tn,size:a}),Object(V.jsx)(Sn,{size:"xs",children:t.name}),Object(V.jsxs)(Cn,{size:"lg",children:[t.description," "]})]}),c&&Object(V.jsx)(vn,{"aria-label":kn(t.name,s),title:kn(t.name,s),onClick:function(e){e.preventDefault(),c(t)},children:s?Object(V.jsx)(un.a,{}):Object(V.jsx)(ln.a,{})}),i&&Object(V.jsx)(vn,{"aria-label":"Remove an app",title:"Remove app",onClick:function(e){e.preventDefault(),i(t)},children:Object(V.jsx)(R.Icon,{size:"sm",type:"delete",color:"error"})})]});return Object(V.jsx)(wn,{layout:!0,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:Object(V.jsx)(An,{to:r,children:u})})},In=function(e){var t=e.onClick;return Object(V.jsx)(wn,{layout:!0,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:t,children:Object(V.jsxs)(gn,{children:[Object(V.jsx)(yn,{alt:"PlayStation gamepad symbols",src:bn,onError:Tn,size:"lg"}),Object(V.jsx)(R.Button,{size:"md",color:"primary",variant:"contained",onClick:t,children:"Add custom app"})]})})},Rn=n(556),Mn=n(1472),zn=n(1698),Dn=n.n(zn),Ln=n(2936),Un=n.n(Ln),Nn=Object(I.default)(R.Card)(ot||(ot=Object(k.a)(["\n  width: 100%;\n  box-sizing: border-box;\n"]))),Bn=function(e){var t=e.value,n=e.onValueChange;return Object(V.jsx)(Nn,{children:Object(V.jsx)(Mn.a,{inputProps:{"aria-label":"search"},startAdornment:Object(V.jsx)(Dn.a,{}),endAdornment:t&&Object(V.jsx)(Ie.a,{"aria-label":"Clear the search",onClick:function(){return n("")},children:Object(V.jsx)(Un.a,{})}),onChange:function(e){return n(e.target.value)},placeholder:"e.g Compound",value:t,style:{width:"100%"}})})},Pn=I.default.div(st||(st=Object(k.a)(["\n  max-width: 650px;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  margin-top: ",";\n  margin-bottom: ",";\n\n  & > p {\n    text-align: center;\n  }\n"])),(function(e){return e.theme.margin.xxl}),(function(e){return e.theme.margin.xxl})),_n=Object(I.default)(R.Button)(ut||(ut=Object(k.a)(["\n  margin-top: ",";\n  max-width: 300px;\n"])),(function(e){return e.theme.margin.md})),Fn=function(e){var t=e.query,n=e.onWalletConnectSearch;return Object(V.jsxs)(Pn,{children:[Object(V.jsxs)(R.Text,{size:"xl",children:["No apps found matching ",Object(V.jsx)("b",{children:t}),". Connect to dApps that haven't yet been integrated with the Safe using the WalletConnect App."]}),Object(V.jsx)(_n,{onClick:n,size:"md",children:"Search WalletConnect"})]})},qn=n(1587),Gn=n(129),Hn=n(1569),Vn=n(1572),Wn=Object(I.default)(R.Checkbox)(dt||(dt=Object(k.a)(["\n  margin: 0;\n"]))),Kn=function(){var e=Object(Hn.e)({subscription:{visited:!0}}).visited,t=(null===e||void 0===e?void 0:e.agreementAccepted)?H.p:void 0;return Object(V.jsx)(Vn.a,{component:Wn,label:Object(V.jsx)(R.Text,{size:"xl",children:"This app is not a Gnosis product and I agree to use this app at my own risk."}),name:"agreementAccepted",type:"checkbox",validate:t})},Jn=n(1648),Xn=n(1875),Yn=function(e){return P(e)?void 0:"Invalid URL"},Zn=Object(Jn.a)({field:"appUrl",updates:{appUrl:function(){var e=Object(A.a)(C.a.mark((function e(t){var n;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=!P(t)&&Object(_t.e)(t),!e.t0){e.next=5;break}return e.next=4,Object(It.f)(t);case 4:e.t0=e.sent;case 5:if(!(n=e.t0)){e.next=8;break}return e.abrupt("return",n);case 8:return e.abrupt("return",t);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}),$n=function(e){var t=e.onAppInfo,n=e.onLoading,a=e.onError,r=Object(Hn.c)("appUrl",{subscription:{value:!0}}).input.value,c=Object(Xn.a)(r,500);return Object(E.useEffect)((function(){var e=function(){var e=Object(A.a)(C.a.mark((function e(){var r;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n(!0),e.prev=1,e.next=4,Object(It.d)(c);case 4:r=e.sent,t(Object(y.a)({},r)),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),null===a||void 0===a||a(e.t0);case 11:n(!1);case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(){return e.apply(this,arguments)}}();P(c)&&e()}),[c,t,a,n]),null},Qn=Object(I.default)(Vn.a)(lt||(lt=Object(k.a)(["\n  && {\n    width: 100%;\n  }\n"]))),ea=function(e){var t=e.appList,n=Object(Hn.e)({subscription:{visited:!0}}).visited,a=(null===n||void 0===n?void 0:n.appUrl)?Object(H.d)(H.p,Yn,Object(It.i)(t)):void 0;return Object(V.jsx)(Qn,{label:"App URL",name:"appUrl",placeholder:"App URL",type:"text",component:R.TextField,validate:a,autoComplete:"off"})},ta=function(e){var t=e.appInfo,n=e.onCancel,a=Object(Hn.e)({subscription:{valid:!0,validating:!0,visited:!0}}),r=a.valid,c=a.validating,i=a.visited,o=Object(E.useMemo)((function(){var e=(null===i||void 0===i?void 0:i.agreementAccepted)&&(null===i||void 0===i?void 0:i.appUrl);return c||!r||!e||!Object(It.h)(t)}),[c,r,i,t]);return Object(V.jsx)(G.b.Footer.Buttons,{cancelButtonProps:{onClick:n},confirmButtonProps:{disabled:o,text:"Add"}})},na=n(21),aa=Object(I.default)(R.TextField)(jt||(jt=Object(k.a)(["\n  && {\n    width: 385px;\n    .MuiFormLabel-root {\n      &.Mui-disabled {\n        color: rgba(0, 0, 0, 0.54);\n        &.Mui-error {\n          color: ",";\n        }\n      }\n    }\n    .MuiInputBase-root {\n      .MuiFilledInput-input {\n        color: rgba(0, 0, 0, 0.54);\n      }\n      &:before {\n        border-bottom-style: inset;\n      }\n    }\n  }\n"])),(function(e){return e.theme.colors.error})),ra=I.default.div(bt||(bt=Object(k.a)(["\n  display: flex;\n  margin: 36px 0 24px 0;\n\n  img {\n    margin-right: 10px;\n  }\n"]))),ca=Object(I.default)(R.Link)(pt||(pt=Object(k.a)(["\n  inline-size: fit-content;\n"]))),ia=I.default.div(ft||(ft=Object(k.a)(["\n  display: flex;\n  margin-bottom: 24px;\n  flex-direction: column;\n  svg {\n    position: relative;\n    top: 4px;\n    left: 4px;\n  }\n"]))),oa=I.default.div(Ot||(Ot=Object(k.a)(["\n  height: 55px;\n  width: 65px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n"]))),sa=Object(I.default)(R.Loader)(xt||(xt=Object(k.a)(["\n  margin-right: 15px;\n"]))),ua={appUrl:"",agreementAccepted:!1},da=Object(It.e)(),la=function(e){var t=e.appList,n=e.closeModal,a=e.onAddApp,r=Object(E.useState)(da),c=Object(T.a)(r,2),i=c[0],o=c[1],s=Object(E.useState)(),u=Object(T.a)(s,2),d=u[0],l=u[1],j=Object(v.h)(),b=Object(E.useState)(!1),p=Object(T.a)(b,2),f=p[0],O=p[1],x=Object(E.useCallback)(Object(A.a)(C.a.mark((function e(){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a(i),j.push({pathname:Object(na.o)(na.g.APPS,Object(na.k)()),search:"?appUrl=".concat(encodeURIComponent(i.url))});case 2:case"end":return e.stop()}}),e)}))),[j,i,a]);Object(E.useEffect)((function(){f&&l(void 0)}),[f]);var h=Object(E.useCallback)((function(e){l(e.message),Object(Mt.c)(Mt.b._903,e.message),o(da)}),[o]);return Object(V.jsx)(qn.a,{decorators:[Zn],initialValues:ua,onSubmit:x,testId:"add-apps-form",children:function(){return Object(V.jsxs)(V.Fragment,{children:[Object(V.jsxs)(G.b.Body,{children:[Object(V.jsxs)(ia,{children:[Object(V.jsx)(R.Text,{size:"xl",as:"span",color:"secondary",children:"Safe Apps are third-party extensions."}),Object(V.jsxs)(ca,{href:"https://docs.gnosis-safe.io/build/sdks/safe-apps",target:"_blank",rel:"noreferrer",title:"Learn more about building Safe Apps",children:[Object(V.jsx)(R.Text,{size:"xl",as:"span",color:"primary",children:"Learn more about building Safe Apps."}),Object(V.jsx)(R.Icon,{size:"sm",type:"externalLink",color:"primary"})]})]}),Object(V.jsx)(ea,{appList:t}),Object(V.jsx)($n,{onAppInfo:o,onLoading:O,onError:h}),Object(V.jsxs)(ra,{children:[f?Object(V.jsx)(oa,{children:Object(V.jsx)(sa,{size:"sm"})}):Object(V.jsx)(Gn.a,{alt:"Token image",width:55,src:i.iconUrl}),Object(V.jsx)(aa,{label:"App name",disabled:!0,meta:{error:d},value:f?"Loading...":i.name===da.name?"":i.name,onChange:function(){}})]}),Object(V.jsx)(Kn,{})]}),Object(V.jsx)(G.b.Footer,{children:Object(V.jsx)(ta,{appInfo:i,onCancel:n})})]})}})},ja=n(91),ba=n(106),pa=n(114),fa=n(88),Oa=function(){var e=Object(A.a)(C.a.mark((function e(){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(Y.getSafeApps)(q.e,Object(B.b)(),{client_url:window.location.origin}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),xa=function(){var e=function(){var e=Object(E.useState)([]),t=Object(T.a)(e,2),n=t[0],a=t[1],r=Object(E.useState)(pn.a.NOT_ASKED),c=Object(T.a)(r,2),i=c[0],o=c[1],s=Object(z.d)();return Object(E.useEffect)((function(){var e=function(){var e=Object(A.a)(C.a.mark((function e(){var t;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o(pn.a.LOADING),e.prev=1,e.next=4,Oa();case 4:if(!(null===(t=e.sent)||void 0===t?void 0:t.length)){e.next=10;break}a(t.map((function(e){return Object(y.a)(Object(y.a)({},e),{},{fetchStatus:pn.a.SUCCESS,id:String(e.id)})}))),o(pn.a.SUCCESS),e.next=11;break;case 10:throw new Error("Empty apps array \ud83e\udd2c");case 11:e.next=18;break;case 13:e.prev=13,e.t0=e.catch(1),o(pn.a.ERROR),Object(Mt.c)(Mt.b._902,e.t0.message),s(Object(pa.b)(fa.a.SAFE_APPS_FETCH_ERROR_MSG));case 18:case"end":return e.stop()}}),e,null,[[1,13]])})));return function(){return e.apply(this,arguments)}}();e()}),[s]),{remoteSafeApps:n,status:i}}(),t=e.remoteSafeApps,n=e.status,a=function(){var e=Object(E.useState)([]),t=Object(T.a)(e,2),n=t[0],a=t[1],r=Object(E.useState)(!1),c=Object(T.a)(r,2),i=c[0],o=c[1],s=Object(E.useCallback)((function(e){a(e),Object(ba.d)(It.a,e.map((function(e){return{url:e.url}})))}),[]);return Object(E.useEffect)((function(){var e=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];a((function(n){var a=Object(ja.a)(n),r=a.findIndex((function(t){return t.url===e.url}));return t?a.splice(r,1):a[r]=Object(y.a)(Object(y.a)({},e),{},{fetchStatus:pn.a.SUCCESS}),a}))},t=function(){var t=Object(A.a)(C.a.mark((function t(){var n,r;return C.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(ba.b)(It.a);case 2:if(t.t0=t.sent,t.t0){t.next=5;break}t.t0=[];case 5:n=t.t0,r=n.map((function(e){return Object(y.a)(Object(y.a)(Object(y.a)({},Object(It.e)()),e),{},{url:e.url.trim(),id:e.url.trim(),custom:!0})})),a(r),o(!0),r.forEach((function(t){Object(It.d)(t.url).then((function(t){e(Object(y.a)(Object(y.a)({},t),{},{custom:!0}))})).catch((function(n){e(t,!0),Object(Mt.c)(Mt.b._900,"".concat(t.url,", ").concat(n.message))}))}));case 10:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();t()}),[]),{customSafeApps:n,loaded:i,updateCustomSafeApps:s}}(),r=a.customSafeApps,c=a.updateCustomSafeApps,i=function(e,t){var n=Object(E.useState)([]),a=Object(T.a)(n,2),r=a[0],c=a[1],i=Object(E.useState)(!1),o=Object(T.a)(i,2),s=o[0],u=o[1];return Object(E.useEffect)((function(){var n=function(){var n=Object(A.a)(C.a.mark((function n(){var a,r;return C.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Object(ba.b)(It.b);case 2:if(n.t0=n.sent,n.t0){n.next=5;break}n.t0=[];case 5:a=n.t0,t===pn.a.SUCCESS&&(r=a.filter((function(t){return e.some((function(e){return e.id===t}))})),c(r),u(!0));case 8:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();n()}),[t,e]),Object(E.useEffect)((function(){t===pn.a.SUCCESS&&Object(ba.d)(It.b,r)}),[r,t]),{pinnedSafeAppIds:r,loaded:s,updatePinnedSafeApps:c}}(t,n),o=i.pinnedSafeAppIds,s=i.updatePinnedSafeApps,u=n===pn.a.LOADING,d=Object(_.i)().trackEvent,l=Object(E.useMemo)((function(){return[].concat(Object(ja.a)(t),Object(ja.a)(r)).sort((function(e,t){return e.name.toLowerCase().localeCompare(t.name.toLowerCase())}))}),[t,r]),j=Object(E.useMemo)((function(){return t.sort((function(e,t){return e.name.toLowerCase().localeCompare(t.name.toLowerCase())}))}),[t]),b=Object(E.useMemo)((function(){return r.filter((function(e){return!t.some((function(t){return t.url===e.url}))})).sort((function(e,t){return e.name.toLowerCase().localeCompare(t.name.toLowerCase())}))}),[r,t]),p=Object(E.useMemo)((function(){return j.filter((function(e){return o.includes(e.id)}))}),[o,j]),f=Object(E.useCallback)((function(e){var t=[].concat(Object(ja.a)(r),[e]);c(t)}),[c,r]),O=Object(E.useCallback)((function(e){var t=r.filter((function(t){return t.id!==e}));c(t)}),[c,r]),x=Object(E.useCallback)((function(e){var t=e.id,n=e.name,a=Object(ja.a)(o);o.includes(t)?(d(Object(y.a)(Object(y.a)({},_.a.PIN),{},{label:n})),a.splice(a.indexOf(t),1)):(d(Object(y.a)(Object(y.a)({},_.a.UNPIN),{},{label:n})),a.push(t)),s(a)}),[d,s,o]);return{allApps:l,appList:j,customApps:b,pinnedSafeApps:p,removeApp:O,togglePin:x,addCustomApp:f,isLoading:u}},ha=n(2937),ma=n(2938),ga=n(644),va=Object(I.default)(ma.a)(ht||(ht=Object(k.a)(["\n  display: flex;\n  margin-top: ",";\n  margin-bottom: ",";\n  box-shadow: 1px 2px 10px 0 rgba(212, 212, 211, 0.59);\n  box-sizing: border-box;\n  max-width: 100%;\n  padding: 52px 54px;\n  justify-content: center;\n  gap: ",";\n"])),(function(e){return e.theme.margin.md}),(function(e){return e.theme.margin.md}),(function(e){return e.theme.margin.sm})),wa=Object(I.default)(ln.a)(mt||(mt=Object(k.a)(["\n  height: 16px;\n  vertical-align: middle;\n"]))),ya=function(){return Object(V.jsxs)(va,{children:[Object(V.jsx)(Gn.a,{alt:"Info",src:ga.a}),Object(V.jsxs)(R.Text,{size:"xl",children:["Simply hover over an app and click on the",Object(V.jsx)(wa,{}),"to bookmark the app here for convenient access"]})]})},Sa=I.default.div(gt||(gt=Object(k.a)(["\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n"]))),Ca=Object(I.css)(vt||(vt=Object(k.a)(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n"]))),Aa=I.default.div(wt||(wt=Object(k.a)(["\n  width: 100%;\n  height: 100%;\n  ",";\n"])),Ca),Ta=Object(I.default)(nn.a.div)(yt||(yt=Object(k.a)(["\n  width: 100%;\n  display: grid;\n  grid-template-columns: repeat(auto-fill, minmax(243px, 1fr));\n  column-gap: 20px;\n  row-gap: 20px;\n  justify-content: space-evenly;\n"]))),ka=I.default.div(St||(St=Object(k.a)(["\n  display: flex;\n  flex-direction: column;\n  flex-grow: 1;\n  align-items: center;\n"]))),Ea=Object(I.default)(R.Text)(Ct||(Ct=Object(k.a)(["\n  width: 100%;\n  margin: ",";\n"])),(function(e){var t=e.theme;return"".concat(t.margin.xl," 0 ").concat(t.margin.md," 0")})),Ia=Object(I.default)(R.IconText)(At||(At=Object(k.a)(["\n  justify-content: center;\n  margin: 16px 55px 20px 0;\n"]))),Ra=function(){var e=Object(na.l)(),t=Object(na.o)(na.g.APPS,{shortName:Object(B.r)(),safeAddress:e}),n=Object(E.useState)(""),a=Object(T.a)(n,2),r=a[0],c=a[1],i=xa(),o=i.allApps,s=i.appList,u=i.removeApp,d=i.isLoading,l=i.pinnedSafeApps,j=i.togglePin,b=i.customApps,p=i.addCustomApp,f=function(e,t){var n=Object(E.useMemo)((function(){return new ha.a(e,{keys:["name","description"],threshold:.2,findAllMatches:!0})}),[e]);return Object(E.useMemo)((function(){return t?n.search(t).map((function(e){return e.item})):e}),[n,e,t])}(s,r),O=Object(E.useState)(null),x=Object(T.a)(O,2),h=x[0],m=x[1],g=Object(Rn.a)(),v=g.open,w=g.toggle,y=g.clickAway,S=0===f.length&&r,C=!!b.length&&!r,A=!r,k=function(e){j(e)};return d||!e?Object(V.jsx)(Aa,{children:Object(V.jsx)(R.Loader,{size:"md"})}):Object(V.jsxs)(Sa,{children:[Object(V.jsx)(R.Menu,{children:Object(V.jsx)(cn.a,{start:"sm",xs:12,children:Object(V.jsx)(R.Breadcrumb,{children:Object(V.jsx)(R.BreadcrumbElement,{iconType:"apps",text:"Apps"})})})}),Object(V.jsxs)(ka,{children:[Object(V.jsx)(Bn,{value:r,onValueChange:function(e){return c(e.replace(/\s{2,}/g," "))}}),A&&Object(V.jsxs)(rn.a,{title:Object(V.jsx)(R.Text,{color:"placeHolder",strong:!0,size:"md",children:"BOOKMARKED APPS"}),defaultExpanded:!0,children:[0===l.length&&Object(V.jsx)(ya,{}),Object(V.jsx)(an.a,{children:Object(V.jsx)(Ta,{"data-testid":"safe_apps__pinned-apps-container",children:l.map((function(e){return Object(V.jsx)(En,{to:"".concat(t,"?appUrl=").concat(encodeURI(e.url)),app:e,pinned:!0,onPin:k},e.id)}))})})]}),C&&Object(V.jsx)(rn.a,{title:Object(V.jsx)(R.Text,{color:"placeHolder",strong:!0,size:"md",children:"CUSTOM APPS"}),defaultExpanded:!0,children:Object(V.jsx)(an.a,{children:Object(V.jsx)(Ta,{children:b.map((function(e){return Object(V.jsx)(En,{to:"".concat(t,"?appUrl=").concat(encodeURI(e.url)),app:e,onRemove:m},e.id)}))})})}),Object(V.jsx)(Ea,{color:"placeHolder",strong:!0,size:"md",children:r?"SEARCH RESULTS":"ALL APPS"}),S&&Object(V.jsx)(Fn,{query:r,onWalletConnectSearch:function(){return c("WalletConnect")}}),Object(V.jsx)(an.a,{children:Object(V.jsxs)(Ta,{"data-testid":"safe_apps__all-apps-container",children:[!r&&Object(V.jsx)(In,{onClick:w}),f.map((function(e){return Object(V.jsx)(En,{to:"".concat(t,"?appUrl=").concat(encodeURIComponent(e.url)),app:e,onPin:k,pinned:l.some((function(t){return t.id===e.id}))},e.id)}))]})})]}),Object(V.jsx)(Ia,{color:"secondary",iconSize:"sm",iconType:"info",text:"These are third-party apps, which means they are not owned, controlled, maintained or audited by Gnosis. Interacting with the apps is at your own risk. Any communication within the Apps is for informational purposes only and must not be construed as investment advice to engage in any transaction.",textSize:"sm"}),v&&Object(V.jsxs)(G.b,{title:"Add app",description:"Add a custom app to the list of apps",handleClose:y,children:[Object(V.jsx)(G.b.Header,{onClose:y,children:Object(V.jsx)(G.b.Header.Title,{children:"Add custom app"})}),Object(V.jsx)(la,{closeModal:y,appList:o,onAddApp:p})]}),h&&Object(V.jsxs)(G.b,{title:"Remove app",description:"Confirm for the app removal",handleClose:function(){return m(null)},children:[Object(V.jsx)(G.b.Header,{onClose:function(){return m(null)},children:Object(V.jsx)(G.b.Header.Title,{children:"Remove app"})}),Object(V.jsx)(G.b.Body,{children:Object(V.jsxs)(R.Text,{size:"xl",children:["This action will remove"," ",Object(V.jsx)(R.Text,{size:"xl",strong:!0,as:"span",children:h.name})," ","from the interface"]})}),Object(V.jsx)(G.b.Footer,{children:Object(V.jsx)(G.b.Footer.Buttons,{cancelButtonProps:{onClick:function(){return m(null)}},confirmButtonProps:{color:"error",onClick:function(){u(h.id),m(null)},text:"Remove"}})})]})]})},Ma=function(e){var t=e.onCancel,n=e.onConfirm;return Object(V.jsx)(R.FixedDialog,{body:Object(V.jsxs)(V.Fragment,{children:[Object(V.jsx)(R.Text,{size:"md",children:"You are now accessing third-party apps, which we do not own, control, maintain or audit. We are not liable for any loss you may suffer in connection with interacting with the apps, which is at your own risk. You must read our Terms, which contain more detailed provisions binding on you relating to the apps."}),Object(V.jsx)("br",{}),Object(V.jsxs)(R.Text,{size:"md",children:["I have read and understood the"," ",Object(V.jsx)("a",{href:"https://gnosis-safe.io/terms",rel:"noopener noreferrer",target:"_blank",children:"Terms"})," ","and this Disclaimer, and agree to be bound by them."]})]}),onCancel:t,onConfirm:n,title:"Disclaimer"})},za="APPS_LEGAL_CONSENT_RECEIVED";t.default=function(){var e=Object(v.h)(),t=(0,Object(w.a)().getAppUrl)(),n=function(){var e=Object(E.useState)(),t=Object(T.a)(e,2),n=t[0],a=t[1];return Object(E.useEffect)((function(){a(Object(ba.b)(za)||!1)}),[]),{consentReceived:n,onConsentReceipt:Object(E.useCallback)((function(){a(!0),Object(ba.d)(za,!0)}),[])}}(),a=n.consentReceived,r=n.onConsentReceipt;return t?a?Object(V.jsx)(tn,{appUrl:t}):Object(V.jsx)(Ma,{onCancel:function(){return e.goBack()},onConfirm:r}):Object(V.jsx)(Ra,{})}}}]);
//# sourceMappingURL=70.94441d69.chunk.js.map